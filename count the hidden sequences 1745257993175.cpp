return max(0L, upper - lower - maxi + mini + 1);